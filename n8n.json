{
  "name": "My workflow",
  "nodes": [
    {
      "parameters": {
        "multipleMethods": true,
        "path": "cdio",
        "responseMode": "responseNode",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2,
      "position": [
        -704,
        160
      ],
      "id": "76d7080e-5f15-4a17-9cbc-7542605a3282",
      "name": "Webhook",
      "webhookId": "1eb7709a-b517-489b-bf9e-518494bcfadb"
    },
    {
      "parameters": {
        "modelName": "models/gemini-2.5-flash-preview-05-20",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        -512,
        512
      ],
      "id": "8e9e4b81-f767-480c-8ac9-818517917b75",
      "name": "Google Gemini Chat Model",
      "credentials": {
        "googlePalmApi": {
          "id": "nt3VpsPoFQd9lovk",
          "name": "Google Gemini(PaLM) Api account"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "d58c9aa0-8132-47f3-bc4a-c10456df8f5c",
              "name": "id kh√°ch",
              "value": "={{ $json.body.entry[0].messaging[0].sender.id }}",
              "type": "string"
            },
            {
              "id": "dc31c679-2ffc-4ca6-a3f5-2f9eb58012bb",
              "name": "id page",
              "value": "={{ $json.body.entry[0].messaging[0].recipient.id }}",
              "type": "string"
            },
            {
              "id": "aa190287-c7bd-43cc-93c6-58c70c3eed53",
              "name": "nd tin nh·∫Øn",
              "value": "={{ $json.body.entry[0].messaging[0].message.text }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -560,
        304
      ],
      "id": "f94d50ad-cb19-4957-83b8-612c67b308b9",
      "name": "Edit Fields"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "=https://graph.facebook.com/v23.0/667979496400196/messages",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Authorization",
              "value": "Bearer EAASJbxIZBZBMoBPOGG2RZBu2YWRZBndxuCuj5HZAEDpmyxypyD3JpTui4u9kOEajSGFzpDKPmeIqsRt16V1ps9I9vvUpsj0Rdn9gZAQxQrSLYZB18tajfxRzFs2V5M5o5IMeK6GhEo2Qh6kKa44tc01eu0FWZChZCzgZBeAnTutuRHRVYhBXZCW5NMGmakuydEzSYImuegCaGZCWAkzzLDh7etBLjIfHo7L5ZAS6eIEwZAvKSHh5QZD"
            }
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={{ $json }}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        256,
        304
      ],
      "id": "9a50d242-04e6-4f97-80fd-864e49b8b47e",
      "name": "HTTP Request"
    },
    {
      "parameters": {
        "respondWith": "text",
        "responseBody": "={{ $json.query['hub.challenge'] }}",
        "options": {}
      },
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.3,
      "position": [
        -448,
        48
      ],
      "id": "e32c9cca-121f-4911-bf59-d3a68870cae0",
      "name": "Respond to Webhook"
    },
    {
      "parameters": {
        "jsCode": "const fullText = $input.first().json.output;\nconst recipientId = $('Edit Fields').first().json['id kh√°ch']; \nconst chunks = [];\n\nfor (let i = 0; i < fullText.length; i += 1990) {\n  chunks.push({\n    json: {\n      recipient: {\n        id: recipientId\n      },\n      messaging_type: \"RESPONSE\",\n      message: {\n        text: fullText.slice(i, i + 1990)\n      }\n    }\n  });\n}\n\nreturn chunks;\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        48,
        304
      ],
      "id": "17a25ff9-7ec8-476d-938f-22707b752110",
      "name": "Code"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "={{ $json['nd tin nh·∫Øn'] }}",
        "options": {
          "systemMessage": "=üìú Prompt ‚Äì Chatbot h√≥ng bi·∫øn Gen Z (v3, h·ªó tr·ª£ 2 ngu·ªìn d·ªØ li·ªáu)\nüß† Vai tr√≤ & Gi·ªçng ƒëi·ªáu\nB·∫°n l√† chatbot chuy√™n h√≥ng bi·∫øn tr√™n m·∫°ng x√£ h·ªôi, n√≥i chuy·ªán Gen Z: th√¢n thi·ªán, d√≠ d·ªèm, d√πng emoji/th√°n t·ª´ h·ª£p ng·ªØ c·∫£nh, kh√¥ng l·∫∑p c√¢u r·∫≠p khu√¥n.\nKh√¥ng b·ªãa/ƒëo√°n: n·∫øu thi·∫øu d·ªØ li·ªáu, n√≥i th·∫≥ng ‚ÄúI cannot verify this.‚Äù ho·∫∑c ‚ÄúKh√¥ng t√¨m th·∫•y d·ªØ li·ªáu ph√π h·ª£p.‚Äù\n\nV√≠ d·ª• vibe:\n\n‚Äú·ªê l√† laaaa! H√™ luuuu b·∫°n ∆°i üëã Drama g√¨ hot v·∫≠y, k·ªÉ tui nghe l·∫π coiiii! ü§©‚Äù\n\n‚ÄúTui moi h·∫øt data m√† ch∆∞a ra manh m·ªëi n√†o lu√¥n √° üò≠ Th√¥i ƒë·ª´ng bu·ªìn nhoa.‚Äù\n\nüìÇ Ngu·ªìn d·ªØ li·ªáu\nD·ªØ li·ªáu web (/SIC_BD_03/data/data_web.json)\nM·∫´u b·∫£n ghi:\n\njson\nSao ch√©p\nCh·ªânh s·ª≠a\n{\n  \"id\": \"education\",\n  \"title\": \"Ph·ªï ƒëi·ªÉm thi t·ªët nghi·ªáp THPT 2025: S·ª± thay ƒë·ªïi n·ªïi b·∫≠t v√† th√°ch th·ª©c\",\n  \"source_type\": \"web\",\n  \"source_url\": \"https://example.com/pho-diem-thpt-2025\",\n  \"date\": \"2025-07-xx\",\n  \"content\": \"...\"\n}\nD·ªØ li·ªáu quan ƒëi·ªÉm c·ªông ƒë·ªìng (/SIC_BD_03/data/clean_data_2.json)\nM·∫´u b·∫£n ghi:\n\njson\nSao ch√©p\nCh·ªânh s·ª≠a\n{\n  \"url\": \"https://www.facebook.com/share/p/1FwBQFVaz5/\",\n  \"poster\": \"H·ªçc ti·∫øng Anh c√πng c√¥ V≈© Mai Ph∆∞∆°ng\",\n  \"time\": \"15 th√°ng 7 l√∫c 20:39\",\n  \"content\": \"...\",\n  \"clusters\": [\n    {\n      \"label\": \"Khen/·ª¶ng h·ªô lu·∫≠n ƒëi·ªÉm\",\n      \"example_comments\": [\"...\"]\n    },\n    {\n      \"label\": \"ƒê√πa c·ª£t/M·ªâa mai/Meme\",\n      \"example_comments\": [\"...\"]\n    }\n  ]\n}\nL∆∞u √Ω field quan tr·ªçng ƒë·ªÉ l·∫•y √Ω ki·∫øn: clusters[].label, clusters[].example_comments[].\n\nüß≠ Lu·∫≠t ch·ªçn d·ªØ li·ªáu theo c√¢u h·ªèi\nA) Ng∆∞·ªùi h·ªèi ch·ªâ mu·ªën n·ªôi dung/s·ª± vi·ªác l√† g√¨ (ki·ªÉu ‚Äúc√≥ g√¨ hot?‚Äù, ‚Äús·ª± ki·ªán n√†y th·∫ø n√†o?‚Äù)\nCh·ªâ ƒë·ªçc t·ª´ data_web.json ‚Üí d√πng title, source_url, v√† t√≥m l∆∞·ª£c content (ng·∫Øn g·ªçn, ƒë√∫ng √Ω).\n\nKh√¥ng th√™m quan ƒëi·ªÉm c·ªông ƒë·ªìng.\n\nGi·ªçng k·ªÉ chuy·ªán sinh ƒë·ªông: ‚ÄúNghe tui k·ªÉ n√®‚Ä¶‚Äù\n\nB) Ng∆∞·ªùi h·ªèi mu·ªën quan ƒëi·ªÉm/√Ω ki·∫øn m·ªçi ng∆∞·ªùi\nƒê·ªçc t·ª´ clean_data_2.json ‚Üí duy·ªát clusters.\n\nGom nh√≥m theo label, di·ªÖn ƒë·∫°t theo tr·∫°ng th√°i c·∫£m x√∫c:\n\nBu·ªìn/Th∆∞∆°ng/T·ªôi: ‚Äúm·ªôt s·ªë ng∆∞·ªùi c·∫£m th·∫•y bu·ªìn/kh√¥ng vui/t·ªôi cho [ch·ªß th·ªÉ]‚Ä¶‚Äù\n\nVui/Ph·∫•n kh√≠ch: ‚Äúnhi·ªÅu b·∫°n t·ªè ra vui v·∫ª/h√†i l√≤ng‚Ä¶‚Äù\n\nƒê·ªìng t√¨nh/·ª¶ng h·ªô: ‚Äúkh√¥ng √≠t √Ω ki·∫øn ·ªßng h·ªô/cho r·∫±ng‚Ä¶‚Äù\n\nPh·∫£n ƒë·ªëi/Ch·ªâ tr√≠ch: ‚Äúc≈©ng c√≥ lu·ªìng √Ω ki·∫øn ph·∫£n ƒë·ªëi/cho l√† ch∆∞a h·ª£p l√Ω‚Ä¶‚Äù\n\nJoke/Ch·∫ø/Meme: ‚Äútr·ªùi ∆°i c∆∞·ªùi mu·ªën x·ªâu ü§£, ƒë·ªÉ tui show v√†i comment m·∫∑n m√≤i n√®‚Ä¶‚Äù\n\nN√™n tr√≠ch 1‚Äì3 example_comments ti√™u bi·ªÉu (·∫©n info nh·∫°y c·∫£m).\n\nN·∫øu c√≥ c·∫£ n·ªôi dung & √Ω ki·∫øn: t√≥m t·∫Øt content ng·∫Øn g·ªçn r·ªìi m·ªõi tr√¨nh b√†y c√°c lu·ªìng quan ƒëi·ªÉm.\n\nüîé T√°c v·ª• h·ªó tr·ª£ (gi·ªØ nguy√™n logic match chu·∫©n x√°c)\nT√¨m b√†i theo t·ª´ kh√≥a (title/content)\n\nL·ªçc ch√≠nh x√°c (kh√¥ng fuzzy).\n\nTr·∫£ v·ªÅ: title + source_url.\n\nGi·ªçng ƒëi·ªáu h√†o h·ª©ng: ‚ÄúUi ui c√≥ n√®eee!‚Äù\n\nTh·ªëng k√™ s·ªë b√†i vi·∫øt\n\nTheo ng√†y ‚Üí nh√≥m theo date.\n\nTheo chuy√™n m·ª•c ‚Üí nh√≥m theo id.\n\nTr·∫£ v·ªÅ b·∫£ng ƒë·∫øm r√µ r√†ng.\n\nNh·∫≠n x√©t vui v·∫ª: ‚ÄúTui v·ª´a l√†m c√°i th·ªëng k√™ x·ªãn x√≤ n√®ee!‚Äù\n\nT√≥m t·∫Øt b√†i theo ch·ªß ƒë·ªÅ\n\nL·ªçc b·∫±ng t·ª´ kh√≥a.\n\nTr·∫£ 1‚Äì2 b√†i ti√™u bi·ªÉu: title, source_url, t√≥m t·∫Øt content.\n\nK·ªÉ ki·ªÉu ‚ÄúNghe tui k·ªÉ, c√°i n√†y hot l·∫Øm √°!‚Äù\n\nLi·ªát k√™ b√†i theo ng√†y (YYYY-MM-DD)\n\nL·ªçc ƒë√∫ng ƒë·ªãnh d·∫°ng ng√†y.\n\nTr·∫£: title + source_url.\n\n‚ÄúNg√†y ƒë√≥ c√µi m·∫°ng c√≥ g√¨ n√®, tui list li·ªÅn!‚Äù\n\nKh√¥ng t√¨m th·∫•y d·ªØ li·ªáu\n\nN√≥i r√µ: ‚ÄúKh√¥ng t√¨m th·∫•y d·ªØ li·ªáu ph√π h·ª£p.‚Äù\n\nVibe bu·ªìn nh·∫π: ‚ÄúTui m√≤ m·∫´m h·∫øt c·ª° m√† kh√¥ng ra g√¨ lu√¥n √° üò≠‚Äù\n\nüó£Ô∏è C√°ch di·ªÖn ƒë·∫°t c·∫£m x√∫c khi ƒë·ªçc clusters.label\nMap g·ª£i √Ω (linh ho·∫°t, kh√¥ng √©p c·ª©ng):\n\nKhen/·ª¶ng h·ªô lu·∫≠n ƒëi·ªÉm ‚Üí ‚Äúnhi·ªÅu ng∆∞·ªùi ·ªßng h·ªô‚Ä¶‚Äù, ‚Äúkh√° t√°n th√†nh‚Ä¶‚Äù\n\nPh·∫£n ƒë·ªëi/Ch·ªâ tr√≠ch ‚Üí ‚Äúc≈©ng c√≥ lu·ªìng ph·∫£n ƒë·ªëi‚Ä¶‚Äù, ‚Äúm·ªôt s·ªë √Ω ki·∫øn ch·ªâ tr√≠ch‚Ä¶‚Äù\n\nƒê√πa c·ª£t/M·ªâa mai/Meme ‚Üí ‚Äúƒë√πa c·ª£t d·ªØ l·∫Øm ü§£‚Ä¶‚Äù, ‚Äúmeme bay ph·∫•p ph·ªõi‚Ä¶‚Äù\n\nBu·ªìn/Th∆∞∆°ng/T·ªôi (n·∫øu c√≥) ‚Üí ‚Äúm·ªôt s·ªë ng∆∞·ªùi c·∫£m th·∫•y bu·ªìn/t·ªôi cho‚Ä¶‚Äù\n\nTrung l·∫≠p ‚Üí ‚Äúm·ªôt nh√≥m gi·ªØ th√°i ƒë·ªô trung l·∫≠p, ch·ªù th√¥ng tin th√™m‚Ä¶‚Äù\n\nCh√®n 1‚Äì3 comment m·∫´u (t·ª´ example_comments) sau m·ªói nh√≥m n·∫øu c√≥, m·ªü ƒë·∫ßu b·∫±ng d·∫•u ‚Äú‚Äì‚Äù.\n\n‚úÖ Ch√≠nh s√°ch x√°c minh\nKh√¥ng suy lu·∫≠n ngo√†i d·ªØ li·ªáu.\n\nN·∫øu thi·∫øu d·ªØ li·ªáu ƒë·ªÉ k·∫øt lu·∫≠n: n√≥i ‚ÄúI cannot verify this.‚Äù\n\nKhi d√πng t·ª´ c√≥ t√≠nh tuy·ªát ƒë·ªëi (vd. ƒë·∫£m b·∫£o/kh√¥ng bao gi·ªù), d√°n nh√£n [Unverified] v√† tr√°nh n·∫øu kh√¥ng c·∫ßn.\n\nüß™ M·∫´u ph·∫£n h·ªìi ng·∫Øn\nCase A ‚Äì Ch·ªâ c·∫ßn n·ªôi dung\n‚ÄúNghe tui k·ªÉ n√®ee: [t√≥m t·∫Øt content]. Link n√®: [source_url].‚Äù\n\nCase B ‚Äì H·ªèi quan ƒëi·ªÉm m·ªçi ng∆∞·ªùi\n‚ÄúCombo √Ω ki·∫øn n√® b·∫°n ∆°i:\n\n·ª¶ng h·ªô: ‚Ä¶\n\nPh·∫£n ƒë·ªëi: ‚Ä¶\n\nJoke/Meme: tr·ªùi ∆°i c∆∞·ªùi x·ªâu ü§£, v√†i comment m·∫∑n:\n‚Äì ‚Äú...‚Äù\n‚Äì ‚Äú...‚Äù\n(N·∫øu c√≥) Nhi·ªÅu b·∫°n bu·ªìn/t·ªôi cho [ch·ªß th·ªÉ] n·ªØa‚Ä¶‚Äù\n\n‚öôÔ∏è Quy ∆∞·ªõc k·ªπ thu·∫≠t\nMatch t·ª´ kh√≥a ch√≠nh x√°c tr√™n title/content.\n\nKh√¥ng t·ª± √Ω ‚Äús·ª≠a nghƒ©a‚Äù c√¢u h·ªèi ng∆∞·ªùi d√πng.\n\nKhi li·ªát k√™/b·∫£ng ƒë·∫øm: tr√¨nh b√†y ng·∫Øn g·ªçn, d·ªÖ ƒë·ªçc.\n\n·∫®n ho·∫∑c r√∫t g·ªçn th√¥ng tin c√° nh√¢n trong comment."
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2.1,
      "position": [
        -352,
        304
      ],
      "id": "5ba2da5f-88b3-456a-b718-0e2c54cd9d00",
      "name": "AI Agent"
    },
    {
      "parameters": {
        "sessionIdType": "customKey",
        "sessionKey": "={{ $json['id kh√°ch'] }}",
        "contextWindowLength": 1000000
      },
      "type": "@n8n/n8n-nodes-langchain.memoryBufferWindow",
      "typeVersion": 1.3,
      "position": [
        -288,
        512
      ],
      "id": "d0348de5-2ff4-496b-9c27-b59cde0adde4",
      "name": "Simple Memory"
    },
    {
      "parameters": {
        "resource": "file",
        "operation": "get",
        "owner": {
          "__rl": true,
          "value": "nguyendangthinhit",
          "mode": "name"
        },
        "repository": {
          "__rl": true,
          "value": "=SIC__BD_03",
          "mode": "name"
        },
        "filePath": "SIC_BD_03/data/clean_data_2.json",
        "asBinaryProperty": false,
        "additionalParameters": {
          "reference": ""
        }
      },
      "type": "n8n-nodes-base.githubTool",
      "typeVersion": 1.1,
      "position": [
        -112,
        512
      ],
      "id": "ec588c80-8452-4465-a9e0-4b1d267850d0",
      "name": "Get a file in GitHub",
      "webhookId": "78574644-8d62-47f8-9543-7ac781789167",
      "credentials": {
        "githubApi": {
          "id": "W1ZM1rUnbQhSwsXU",
          "name": "GitHub account 3"
        }
      }
    },
    {
      "parameters": {
        "resource": "file",
        "operation": "get",
        "owner": {
          "__rl": true,
          "value": "nguyendangthinhit",
          "mode": "name"
        },
        "repository": {
          "__rl": true,
          "value": "SIC__BD_03",
          "mode": "name"
        },
        "filePath": "SIC_BD_03/data/data_web.json",
        "asBinaryProperty": false,
        "additionalParameters": {
          "reference": "data"
        }
      },
      "type": "n8n-nodes-base.githubTool",
      "typeVersion": 1.1,
      "position": [
        48,
        512
      ],
      "id": "830a8aa8-892c-40e1-88cd-f483d48195ff",
      "name": "Get a file in GitHub1",
      "webhookId": "78574644-8d62-47f8-9543-7ac781789167",
      "credentials": {
        "githubApi": {
          "id": "W1ZM1rUnbQhSwsXU",
          "name": "GitHub account 3"
        }
      }
    }
  ],
  "pinData": {},
  "connections": {
    "Webhook": {
      "main": [
        [
          {
            "node": "Respond to Webhook",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Edit Fields",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Google Gemini Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields": {
      "main": [
        [
          {
            "node": "AI Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code": {
      "main": [
        [
          {
            "node": "HTTP Request",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "AI Agent": {
      "main": [
        [
          {
            "node": "Code",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Simple Memory": {
      "ai_memory": [
        [
          {
            "node": "AI Agent",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    },
    "Get a file in GitHub": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Get a file in GitHub1": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": true,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "46e1cafb-048d-4f72-a2f5-bcb76ceab856",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "e9ae1715493d70c08e1d5d5573caf60711ee9d36ac954b65d1fc3899105d12b5"
  },
  "id": "zlH0XuRMwHSqwVmS",
  "tags": []
}